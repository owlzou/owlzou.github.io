<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link href="https:&#x2F;&#x2F;owlzou.github.io&#x2F;style.css" rel="stylesheet" />
    <link
      href="https:&#x2F;&#x2F;owlzou.github.io&#x2F;favicon.ico"
      rel="shortcut icon"
      type="image/x-icon"
    />
    <link
      href="https:&#x2F;&#x2F;owlzou.github.io&#x2F;favicon.ico"
      rel="icon"
      type="image/x-icon"
    />
    <!-- 放 SEO 的-->
    
     
    <link href="https:&#x2F;&#x2F;owlzou.github.io&#x2F;custom.css" rel="stylesheet"/>

    <title>
    Rust 笔记（七）Collections | Catalyst
</title>
  </head>
  <body>
    <div class="background"></div>
    <div class="fab">
  <i data-feather="chevron-up"></i>
</div>
 
    <div class="grass"></div>
    
    <div class="wrapper">
      <div class="container">
        <!-- navigation -->
        <!-- 顶端导航 -->
<div class="top-nav">
  <div class="title">
    
      <img src="&#x2F;c_icon.png" class="website-icon"/>
    
    <a href="https:&#x2F;&#x2F;owlzou.github.io&#x2F;">Catalyst</a>
  </div>
  <nav class="navs">
    <ul>
      
      <ol>
        
        <a class="side-button" href="&#x2F;search" title="搜索">
          <i data-feather="search"></i>
          <span class="tip">搜索</span>
        </a>
        
      </ol>
      
      <ol>
        
        <a class="side-button" href="&#x2F;posts" title="博文">
          <i data-feather="feather"></i>
          <span class="tip">博文</span>
        </a>
        
      </ol>
      
      <ol>
        
        <a class="side-button" href="&#x2F;archives" title="归档">
          <i data-feather="archive"></i>
          <span class="tip">归档</span>
        </a>
        
      </ol>
      
      <ol>
        
        <a class="side-button" href="&#x2F;projects" title="项目">
          <i data-feather="star"></i>
          <span class="tip">项目</span>
        </a>
        
      </ol>
      
      <ol>
        
        <a class="side-button" href="&#x2F;taxonomies" title="分类">
          <i data-feather="tag"></i>
          <span class="tip">分类</span>
        </a>
        
      </ol>
      
      <ol>
        
        <a class="side-button" href="&#x2F;about" title="关于">
          <i data-feather="alert-circle"></i>
          <span class="tip">关于</span>
        </a>
        
      </ol>
      
      <ol>
        
        <a
          class="side-button"
          href="https:&#x2F;&#x2F;github.com&#x2F;owlzou"
          target="_blank"
          title="Github"
        >
          <i data-feather="github"></i>
           <span class="tip">Github</span>
        </a>
        
      </ol>
      
    </ul>
  </nav>
</div>

        <!-- main -->
        <div class="main">
          <div class="moblie-header" id="moblie-header">
            <div class="moblie-title">Catalyst</div>
            <button class="burger">
              <i data-feather="menu"></i>
            </button>
          </div>
          <!-- content -->
          
    <div class="blog">
        <!-- 文章封面 -->
        
            <div class="post-cover-inside"><img class="lazyload" data-src="laura-ockel-RZSrqJjhkeg-unsplash.webp"/> </div>       
                
        <h1 class="post-title">
            Rust 笔记（七）Collections</h1>
        <!-- 文章信息 -->
        <div class="post-info">           
            <div class="post-date"> <i data-feather="clock"></i>2022-01-16</div>            
                            
                <div class="post-date"><i data-feather="edit"></i> 2022-01-22</div>
                       
            
                
                    
                    <a class="post-category" href="https:&#x2F;&#x2F;owlzou.github.io&#x2F;categories&#x2F;yu-yan-ji-chu&#x2F;">语言基础</a>
                
            
                           
                
                    
                    <a class="post-tag" href="https:&#x2F;&#x2F;owlzou.github.io&#x2F;tags&#x2F;rust&#x2F;">Rust</a>
                
            
        </div>       
        <article class="post-type">
            <p>刷题用到的 Collections 下的类型笔记，将之前的哈希表也搬过来了。</p>
<span id="continue-reading"></span><h2 id="hashmap">HashMap</h2>
<pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#7f8989;">//哈希表
</span><span style="color:#72ab00;">use </span><span style="color:#1f1f1f;">std::collections::HashMap;
</span><span style="color:#668f14;">fn </span><span style="color:#c23f31;">main</span><span style="color:#1f1f1f;">() {
    </span><span style="color:#668f14;">let</span><span style="color:#1f1f1f;"> field_name </span><span style="color:#72ab00;">= </span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;Blue&quot;</span><span style="color:#1f1f1f;">);
    </span><span style="color:#668f14;">let</span><span style="color:#1f1f1f;"> field_value </span><span style="color:#72ab00;">= </span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;蓝色&quot;</span><span style="color:#1f1f1f;">);

    </span><span style="color:#668f14;">let mut</span><span style="color:#1f1f1f;"> map </span><span style="color:#72ab00;">= </span><span style="color:#1f1f1f;">HashMap::new();
    </span><span style="color:#7f8989;">//插入数据
</span><span style="color:#1f1f1f;">    map.</span><span style="color:#b39f04;">insert</span><span style="color:#1f1f1f;">(field_name, field_value);
</span></code></pre>
<ul>
<li>读取数据</li>
</ul>
<pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#1f1f1f;">    </span><span style="color:#7f8989;">//读取数据
    </span><span style="color:#668f14;">let</span><span style="color:#1f1f1f;"> _fav_color </span><span style="color:#72ab00;">=</span><span style="color:#1f1f1f;"> map.</span><span style="color:#b39f04;">get</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;Blue&quot;</span><span style="color:#1f1f1f;">));

    </span><span style="color:#7f8989;">//打印哈希表结构，如果在结构体中打开这种格式化需要打开 debug（#[derive(Debug)]）
    </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;</span><span style="color:#aeb52b;">{:?}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, map);
    </span><span style="color:#7f8989;">//{&quot;Blue&quot;: &quot;蓝色&quot;}
</span></code></pre>
<ul>
<li>更新数据</li>
</ul>
<pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#1f1f1f;">    </span><span style="color:#7f8989;">//更新数据，覆盖
</span><span style="color:#1f1f1f;">    map.</span><span style="color:#b39f04;">insert</span><span style="color:#1f1f1f;">(</span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;Blue&quot;</span><span style="color:#1f1f1f;">), </span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;总之是蓝色&quot;</span><span style="color:#1f1f1f;">));

    </span><span style="color:#7f8989;">//更新数据（如果没有和该键相关联的值）
</span><span style="color:#1f1f1f;">    map.</span><span style="color:#b39f04;">entry</span><span style="color:#1f1f1f;">(</span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;Red&quot;</span><span style="color:#1f1f1f;">))
        .</span><span style="color:#b39f04;">or_insert</span><span style="color:#1f1f1f;">(</span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;红色&quot;</span><span style="color:#1f1f1f;">));
    map.</span><span style="color:#b39f04;">entry</span><span style="color:#1f1f1f;">(</span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;Blue&quot;</span><span style="color:#1f1f1f;">))
        .</span><span style="color:#b39f04;">or_insert</span><span style="color:#1f1f1f;">(</span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;不会被覆盖&quot;</span><span style="color:#1f1f1f;">));

    map.</span><span style="color:#b39f04;">entry</span><span style="color:#1f1f1f;">(</span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;Yellow&quot;</span><span style="color:#1f1f1f;">)).</span><span style="color:#b39f04;">or_default</span><span style="color:#1f1f1f;">(); </span><span style="color:#7f8989;">//插入 default

    </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;</span><span style="color:#aeb52b;">{:?}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, map);
    </span><span style="color:#7f8989;">//{&quot;Blue&quot;: &quot;总之是蓝色&quot;, &quot;Red&quot;: &quot;红色&quot;, &quot;Yellow&quot;: &quot;&quot;}
</span></code></pre><pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#1f1f1f;">    </span><span style="color:#7f8989;">// 基于原数据添加
    </span><span style="color:#668f14;">let mut</span><span style="color:#1f1f1f;"> map2: HashMap&lt;</span><span style="color:#668f14;">i32</span><span style="color:#1f1f1f;">, </span><span style="color:#668f14;">i32</span><span style="color:#1f1f1f;">&gt; </span><span style="color:#72ab00;">= </span><span style="color:#1f1f1f;">HashMap::new();
    map2.</span><span style="color:#b39f04;">insert</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">);
    </span><span style="color:#72ab00;">*</span><span style="color:#1f1f1f;">map2.</span><span style="color:#b39f04;">entry</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">).</span><span style="color:#b39f04;">or_insert</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">0</span><span style="color:#1f1f1f;">) </span><span style="color:#72ab00;">+= </span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">;
    </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;</span><span style="color:#aeb52b;">{:?}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, map2);
    </span><span style="color:#7f8989;">// {1: 4}
</span></code></pre>
<ul>
<li>删除数据</li>
</ul>
<pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#1f1f1f;">    </span><span style="color:#7f8989;">//删除数据
    </span><span style="color:#668f14;">let</span><span style="color:#1f1f1f;"> blue </span><span style="color:#72ab00;">=</span><span style="color:#1f1f1f;"> map.</span><span style="color:#b39f04;">remove</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;Blue&quot;</span><span style="color:#1f1f1f;">)); </span><span style="color:#7f8989;">//返回值
    </span><span style="color:#668f14;">let</span><span style="color:#1f1f1f;"> red </span><span style="color:#72ab00;">=</span><span style="color:#1f1f1f;"> map.</span><span style="color:#b39f04;">remove_entry</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#a2a001;">String</span><span style="color:#1f1f1f;">::from(</span><span style="color:#d07711;">&quot;Red&quot;</span><span style="color:#1f1f1f;">)); </span><span style="color:#7f8989;">//返回键和值
    </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;</span><span style="color:#aeb52b;">{:?}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, blue); </span><span style="color:#7f8989;">//Some(&quot;总之是蓝色&quot;)
    </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;</span><span style="color:#aeb52b;">{:?}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, red); </span><span style="color:#7f8989;">//Some((&quot;Red&quot;, &quot;红色&quot;))
</span></code></pre>
<ul>
<li>遍历数据</li>
</ul>
<pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#1f1f1f;">    </span><span style="color:#7f8989;">//遍历
    </span><span style="color:#72ab00;">for </span><span style="color:#1f1f1f;">(key, value) </span><span style="color:#72ab00;">in &amp;</span><span style="color:#1f1f1f;">map {
        </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;-- </span><span style="color:#aeb52b;">{}</span><span style="color:#d07711;">:</span><span style="color:#aeb52b;">{}</span><span style="color:#d07711;">,&quot;</span><span style="color:#1f1f1f;">, key, value);
    }
}
</span></code></pre><h2 id="binaryheap">BinaryHeap</h2>
<p>用二进制堆实现的优先队列（最大堆）。</p>
<pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#72ab00;">use </span><span style="color:#1f1f1f;">std::collections::BinaryHeap;

</span><span style="color:#668f14;">fn </span><span style="color:#c23f31;">main</span><span style="color:#1f1f1f;">() {
    </span><span style="color:#668f14;">let mut</span><span style="color:#1f1f1f;"> heap: BinaryHeap&lt;</span><span style="color:#668f14;">i32</span><span style="color:#1f1f1f;">&gt; </span><span style="color:#72ab00;">= </span><span style="color:#1f1f1f;">BinaryHeap::new();
    </span><span style="color:#72ab00;">for</span><span style="color:#1f1f1f;"> i </span><span style="color:#72ab00;">in </span><span style="color:#1f1f1f;">[</span><span style="color:#b3933a;">2</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">4</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">5</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">].</span><span style="color:#b39f04;">iter</span><span style="color:#1f1f1f;">() {
        </span><span style="color:#7f8989;">// 用 push 添加数据
</span><span style="color:#1f1f1f;">        heap.</span><span style="color:#b39f04;">push</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">*</span><span style="color:#1f1f1f;">i);
    }

    </span><span style="color:#7f8989;">// 使用 peek 查找最大值
    </span><span style="color:#668f14;">let</span><span style="color:#1f1f1f;"> k: </span><span style="color:#a2a001;">Option</span><span style="color:#1f1f1f;">&lt;</span><span style="color:#72ab00;">&amp;</span><span style="color:#668f14;">i32</span><span style="color:#1f1f1f;">&gt; </span><span style="color:#72ab00;">=</span><span style="color:#1f1f1f;"> heap.</span><span style="color:#b39f04;">peek</span><span style="color:#1f1f1f;">(); </span><span style="color:#7f8989;">// 这里返回的是引用
    </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;max: </span><span style="color:#aeb52b;">{:?}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, k); </span><span style="color:#7f8989;">//max: Some(5)

    // 用 pop 从最大依次弹出
    </span><span style="color:#72ab00;">for</span><span style="color:#1f1f1f;"> _i </span><span style="color:#72ab00;">in </span><span style="color:#b3933a;">0</span><span style="color:#72ab00;">..</span><span style="color:#b3933a;">3 </span><span style="color:#1f1f1f;">{
        </span><span style="color:#668f14;">let</span><span style="color:#1f1f1f;"> m: </span><span style="color:#a2a001;">Option</span><span style="color:#1f1f1f;">&lt;</span><span style="color:#668f14;">i32</span><span style="color:#1f1f1f;">&gt; </span><span style="color:#72ab00;">=</span><span style="color:#1f1f1f;"> heap.</span><span style="color:#b39f04;">pop</span><span style="color:#1f1f1f;">(); </span><span style="color:#7f8989;">// 返回的不是引用
        </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;pop: </span><span style="color:#aeb52b;">{:?}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, m);
    }
    </span><span style="color:#7f8989;">// pop: Some(5)
    // pop: Some(4)
    // pop: Some(3)

    // 用 clear 清空堆
</span><span style="color:#1f1f1f;">    heap.</span><span style="color:#b39f04;">clear</span><span style="color:#1f1f1f;">();
    </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;heap: </span><span style="color:#aeb52b;">{:?}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, heap); </span><span style="color:#7f8989;">// heap: []

    // 用 is_empty 判断是否为空
    </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;is empty: </span><span style="color:#aeb52b;">{}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, heap.</span><span style="color:#b39f04;">is_empty</span><span style="color:#1f1f1f;">()); </span><span style="color:#7f8989;">//is empty: true
</span><span style="color:#1f1f1f;">}
</span></code></pre>
<p><strong>自定义排序</strong></p>
<p><code>BinaryHeap</code> 里的类型需要实现<code>Ord</code>特性，其需要类型同时具有<code>PartialOrd</code>和<code>Eq</code>（要求<code>PartialEq</code>)。也需要定义一个<code>cmp</code>的继承。</p>
<p>这些特性的关系：</p>
<ul>
<li><a href="https://doc.rust-lang.org/std/cmp/trait.Eq.html">Eq</a>: 等价关系</li>
<li><a href="https://doc.rust-lang.org/std/cmp/trait.PartialEq.html">PartialEq</a>:偏序关系。</li>
<li><a href="https://doc.rust-lang.org/std/cmp/trait.PartialOrd.html">PartialOrd</a>:用于排序</li>
<li><a href="https://doc.rust-lang.org/std/cmp/trait.Ord.html">Ord</a>:决定物体全序关系的特性</li>
</ul>
<p>参考 <a href="https://doc.rust-lang.org/std/cmp/trait.Ord.html#how-can-i-implement-ord">how can I implement Ord</a>。</p>
<pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#72ab00;">use </span><span style="color:#1f1f1f;">std::cmp::Ordering;
</span><span style="color:#72ab00;">use </span><span style="color:#1f1f1f;">std::collections::BinaryHeap;

#[</span><span style="color:#5597d6;">derive</span><span style="color:#1f1f1f;">(Eq,Debug)]
</span><span style="color:#668f14;">struct </span><span style="color:#c23f31;">Item </span><span style="color:#1f1f1f;">{
    </span><span style="color:#5597d6;">val</span><span style="color:#1f1f1f;">: </span><span style="color:#668f14;">i32</span><span style="color:#1f1f1f;">,
}

</span><span style="color:#668f14;">impl </span><span style="color:#1f1f1f;">Ord </span><span style="color:#72ab00;">for </span><span style="color:#c23f31;">Item </span><span style="color:#1f1f1f;">{
    </span><span style="color:#668f14;">fn </span><span style="color:#c23f31;">cmp</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#5597d6;">self</span><span style="color:#1f1f1f;">, </span><span style="color:#5597d6;">other</span><span style="color:#1f1f1f;">: </span><span style="color:#72ab00;">&amp;</span><span style="color:#668f14;">Self</span><span style="color:#1f1f1f;">) -&gt; Ordering {
        </span><span style="color:#5597d6;">self</span><span style="color:#1f1f1f;">.val.</span><span style="color:#b39f04;">cmp</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#1f1f1f;">other.val)
    }
}

</span><span style="color:#668f14;">impl </span><span style="color:#1f1f1f;">PartialOrd </span><span style="color:#72ab00;">for </span><span style="color:#c23f31;">Item </span><span style="color:#1f1f1f;">{
    </span><span style="color:#668f14;">fn </span><span style="color:#c23f31;">partial_cmp</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#5597d6;">self</span><span style="color:#1f1f1f;">, </span><span style="color:#5597d6;">other</span><span style="color:#1f1f1f;">: </span><span style="color:#72ab00;">&amp;</span><span style="color:#668f14;">Self</span><span style="color:#1f1f1f;">) -&gt; </span><span style="color:#a2a001;">Option</span><span style="color:#1f1f1f;">&lt;Ordering&gt; {
        </span><span style="color:#a2a001;">Some</span><span style="color:#1f1f1f;">(</span><span style="color:#5597d6;">self</span><span style="color:#1f1f1f;">.</span><span style="color:#b39f04;">cmp</span><span style="color:#1f1f1f;">(other))
    }
}

</span><span style="color:#668f14;">impl </span><span style="color:#1f1f1f;">PartialEq </span><span style="color:#72ab00;">for </span><span style="color:#c23f31;">Item </span><span style="color:#1f1f1f;">{
    </span><span style="color:#668f14;">fn </span><span style="color:#c23f31;">eq</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#5597d6;">self</span><span style="color:#1f1f1f;">, </span><span style="color:#5597d6;">other</span><span style="color:#1f1f1f;">: </span><span style="color:#72ab00;">&amp;</span><span style="color:#668f14;">Self</span><span style="color:#1f1f1f;">) -&gt; </span><span style="color:#668f14;">bool </span><span style="color:#1f1f1f;">{
        </span><span style="color:#5597d6;">self</span><span style="color:#1f1f1f;">.</span><span style="color:#b39f04;">cmp</span><span style="color:#1f1f1f;">(other) </span><span style="color:#72ab00;">== </span><span style="color:#1f1f1f;">Ordering::Equal
    }
}

</span><span style="color:#668f14;">fn </span><span style="color:#c23f31;">main</span><span style="color:#1f1f1f;">() {
    </span><span style="color:#668f14;">let mut</span><span style="color:#1f1f1f;"> heap: BinaryHeap&lt;Item&gt; </span><span style="color:#72ab00;">= </span><span style="color:#1f1f1f;">BinaryHeap::new();
    </span><span style="color:#72ab00;">for</span><span style="color:#1f1f1f;"> i </span><span style="color:#72ab00;">in </span><span style="color:#1f1f1f;">[</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">,</span><span style="color:#b3933a;">2</span><span style="color:#1f1f1f;">,</span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">,</span><span style="color:#b3933a;">4</span><span style="color:#1f1f1f;">,</span><span style="color:#b3933a;">5</span><span style="color:#1f1f1f;">].</span><span style="color:#b39f04;">iter</span><span style="color:#1f1f1f;">() {
        </span><span style="color:#7f8989;">// 用 push 添加数据
</span><span style="color:#1f1f1f;">        heap.</span><span style="color:#b39f04;">push</span><span style="color:#1f1f1f;">(Item { val: </span><span style="color:#72ab00;">*</span><span style="color:#1f1f1f;">i });
    }

    </span><span style="color:#72ab00;">for</span><span style="color:#1f1f1f;"> _i </span><span style="color:#72ab00;">in </span><span style="color:#b3933a;">0</span><span style="color:#72ab00;">..</span><span style="color:#1f1f1f;">heap.</span><span style="color:#b39f04;">len</span><span style="color:#1f1f1f;">(){
        </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;pop:</span><span style="color:#aeb52b;">{:?}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, heap.</span><span style="color:#b39f04;">pop</span><span style="color:#1f1f1f;">());
    }
    </span><span style="color:#7f8989;">// pop:Some(Item { val: 5 })
    // pop:Some(Item { val: 4 })
    // pop:Some(Item { val: 3 })
    // pop:Some(Item { val: 2 })
    // pop:Some(Item { val: 1 })
</span><span style="color:#1f1f1f;">}
</span></code></pre><h2 id="hashset">HashSet</h2>
<p><a href="https://doc.rust-lang.org/std/collections/struct.HashSet.html">文档</a></p>
<p>HashSet 要求包括的元素实现<code>Eq</code>和<code>Hash</code>特性。（常用<code>#[derive(PartialEq, Eq, Hash)]</code>可解决）</p>
<pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#72ab00;">use </span><span style="color:#1f1f1f;">std::collections::HashSet;

</span><span style="color:#668f14;">fn </span><span style="color:#c23f31;">main</span><span style="color:#1f1f1f;">() {
    </span><span style="color:#668f14;">let mut</span><span style="color:#1f1f1f;"> nums </span><span style="color:#72ab00;">= </span><span style="color:#1f1f1f;">HashSet::new();

    </span><span style="color:#7f8989;">// 添加数据
</span><span style="color:#1f1f1f;">    nums.</span><span style="color:#b39f04;">insert</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">);
    nums.</span><span style="color:#b39f04;">insert</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">2</span><span style="color:#1f1f1f;">);
    nums.</span><span style="color:#b39f04;">insert</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">);

    </span><span style="color:#7f8989;">// 如果数据存在返回 false，否则 true
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(nums.</span><span style="color:#b39f04;">insert</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">), </span><span style="color:#b3933a;">false</span><span style="color:#1f1f1f;">);

    </span><span style="color:#7f8989;">// 取出并删除数据（如果数据存在）
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(nums.</span><span style="color:#b39f04;">take</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#b3933a;">2</span><span style="color:#1f1f1f;">), </span><span style="color:#a2a001;">Some</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">2</span><span style="color:#1f1f1f;">));

    </span><span style="color:#7f8989;">// 消耗并将返回一个包含所有元素的迭代器，顺序任意
    // .iter() 同顺序任意
    </span><span style="color:#72ab00;">for</span><span style="color:#1f1f1f;"> i </span><span style="color:#72ab00;">in</span><span style="color:#1f1f1f;"> nums.</span><span style="color:#b39f04;">drain</span><span style="color:#1f1f1f;">() {
        </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;</span><span style="color:#aeb52b;">{}</span><span style="color:#d07711;">&quot;</span><span style="color:#1f1f1f;">, i);
    }

    </span><span style="color:#7f8989;">// set 被消耗变空
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(nums.</span><span style="color:#b39f04;">is_empty</span><span style="color:#1f1f1f;">(), </span><span style="color:#b3933a;">true</span><span style="color:#1f1f1f;">);
}
</span></code></pre><h2 id="vecdeque">VecDeque</h2>
<p>双向队列，<a href="https://doc.rust-lang.org/std/collections/struct.VecDeque.html">文档</a>。</p>
<pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#72ab00;">use </span><span style="color:#1f1f1f;">std::collections::VecDeque;

</span><span style="color:#668f14;">fn </span><span style="color:#c23f31;">main</span><span style="color:#1f1f1f;">() {
    </span><span style="color:#7f8989;">// 可从 vec 初始化
    </span><span style="color:#668f14;">let mut</span><span style="color:#1f1f1f;"> deq: VecDeque&lt;</span><span style="color:#668f14;">i32</span><span style="color:#1f1f1f;">&gt; </span><span style="color:#72ab00;">= </span><span style="color:#1f1f1f;">VecDeque::from(</span><span style="color:#a2a001;">vec!</span><span style="color:#1f1f1f;">[</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">2</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">]);

    </span><span style="color:#7f8989;">// 通常的加入新项目：push_back
</span><span style="color:#1f1f1f;">    deq.</span><span style="color:#b39f04;">push_back</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">4</span><span style="color:#1f1f1f;">);
    </span><span style="color:#7f8989;">// 从第一位加入：
</span><span style="color:#1f1f1f;">    deq.</span><span style="color:#b39f04;">push_front</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">0</span><span style="color:#1f1f1f;">);
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(deq, [</span><span style="color:#b3933a;">0</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">2</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">4</span><span style="color:#1f1f1f;">]);

    </span><span style="color:#7f8989;">// 返回第一个元素的 ref , 另有 front_mut
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(deq.</span><span style="color:#b39f04;">front</span><span style="color:#1f1f1f;">(), </span><span style="color:#a2a001;">Some</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#b3933a;">0</span><span style="color:#1f1f1f;">));
    </span><span style="color:#7f8989;">// 返回最后一个元素的 ref，另有 back_mut
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(deq.</span><span style="color:#b39f04;">back</span><span style="color:#1f1f1f;">(), </span><span style="color:#a2a001;">Some</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#b3933a;">4</span><span style="color:#1f1f1f;">));

    </span><span style="color:#7f8989;">// 移除并返回元素
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(deq.</span><span style="color:#b39f04;">remove</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">0</span><span style="color:#1f1f1f;">), </span><span style="color:#a2a001;">Some</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">0</span><span style="color:#1f1f1f;">));
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(deq, [</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">2</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">4</span><span style="color:#1f1f1f;">]);

    </span><span style="color:#7f8989;">//在指定位置插入元素
</span><span style="color:#1f1f1f;">    deq.</span><span style="color:#b39f04;">insert</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">100</span><span style="color:#1f1f1f;">);
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(deq, [</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">100</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">2</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">4</span><span style="color:#1f1f1f;">]);

    </span><span style="color:#7f8989;">// 按顺序遍历一遍并选择保留的元素 (保留原顺序)
</span><span style="color:#1f1f1f;">    deq.</span><span style="color:#b39f04;">retain</span><span style="color:#1f1f1f;">(|</span><span style="color:#72ab00;">&amp;</span><span style="color:#5597d6;">x</span><span style="color:#1f1f1f;">| x </span><span style="color:#72ab00;">&lt; </span><span style="color:#b3933a;">5</span><span style="color:#1f1f1f;">);
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(deq, [</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">2</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">, </span><span style="color:#b3933a;">4</span><span style="color:#1f1f1f;">]);
}
</span></code></pre><h2 id="btreemap">BTreeMap</h2>
<p>可排序的集合，<a href="https://doc.rust-lang.org/std/collections/struct.BTreeMap.html">文档</a></p>
<pre style="background-color:#f5f5f5;">
<code class="language-rust" data-lang="rust"><span style="color:#72ab00;">use </span><span style="color:#1f1f1f;">std::collections::BTreeMap;

</span><span style="color:#668f14;">fn </span><span style="color:#c23f31;">main</span><span style="color:#1f1f1f;">() {
    </span><span style="color:#668f14;">let mut</span><span style="color:#1f1f1f;"> treemap </span><span style="color:#72ab00;">= </span><span style="color:#1f1f1f;">BTreeMap::new();

    </span><span style="color:#7f8989;">// 插入一些数据
</span><span style="color:#1f1f1f;">    treemap.</span><span style="color:#b39f04;">insert</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">222</span><span style="color:#1f1f1f;">, </span><span style="color:#d07711;">&quot;A&quot;</span><span style="color:#1f1f1f;">);
    treemap.</span><span style="color:#b39f04;">insert</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">, </span><span style="color:#d07711;">&quot;B&quot;</span><span style="color:#1f1f1f;">);

    </span><span style="color:#7f8989;">// 获取数据
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(treemap[</span><span style="color:#72ab00;">&amp;</span><span style="color:#b3933a;">222</span><span style="color:#1f1f1f;">], </span><span style="color:#d07711;">&quot;A&quot;</span><span style="color:#1f1f1f;">);
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(treemap.</span><span style="color:#b39f04;">get</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#b3933a;">222</span><span style="color:#1f1f1f;">), </span><span style="color:#a2a001;">Some</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#d07711;">&quot;A&quot;</span><span style="color:#1f1f1f;">));

    </span><span style="color:#7f8989;">// entry 用法和 hashmap 差不多
</span><span style="color:#1f1f1f;">    treemap.</span><span style="color:#b39f04;">entry</span><span style="color:#1f1f1f;">(</span><span style="color:#b3933a;">20</span><span style="color:#1f1f1f;">).</span><span style="color:#b39f04;">or_insert</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;C&quot;</span><span style="color:#1f1f1f;">);

    </span><span style="color:#7f8989;">// 获取元素数量
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(treemap.</span><span style="color:#b39f04;">len</span><span style="color:#1f1f1f;">(), </span><span style="color:#b3933a;">3</span><span style="color:#1f1f1f;">);

    </span><span style="color:#7f8989;">// 按 key 顺序迭代
    </span><span style="color:#72ab00;">for </span><span style="color:#1f1f1f;">(key, value) </span><span style="color:#72ab00;">in</span><span style="color:#1f1f1f;"> treemap.</span><span style="color:#b39f04;">iter</span><span style="color:#1f1f1f;">() {
        </span><span style="color:#a2a001;">println!</span><span style="color:#1f1f1f;">(</span><span style="color:#d07711;">&quot;(</span><span style="color:#aeb52b;">{}</span><span style="color:#d07711;">,</span><span style="color:#aeb52b;">{}</span><span style="color:#d07711;">)&quot;</span><span style="color:#1f1f1f;">, key, value);
    }
    </span><span style="color:#7f8989;">// (1,B)
    // (20,C)
    // (222,A)

    // 移除元素
</span><span style="color:#1f1f1f;">    treemap.</span><span style="color:#b39f04;">remove</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">);
    </span><span style="color:#a2a001;">assert_eq!</span><span style="color:#1f1f1f;">(treemap.</span><span style="color:#b39f04;">contains_key</span><span style="color:#1f1f1f;">(</span><span style="color:#72ab00;">&amp;</span><span style="color:#b3933a;">1</span><span style="color:#1f1f1f;">), </span><span style="color:#b3933a;">false</span><span style="color:#1f1f1f;">);
}
</span></code></pre><div class="reference">
    <div class="reference-title"><i data-feather="book-open"></i>参考资料</div>
    <ul>
<li>封面图片：Photo by <a href="https://unsplash.com/@viazavier?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Laura Ockel</a> on <a href="https://unsplash.com/s/photos/gear?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></li>
</ul>

</div>

        </article>
        <div class="divider"></div>
        
            
                <div id="comment">
                    <div class="comment-placeholder">
                        <i data-feather="loader"></i>Loading……</div>
                    <script async crossorigin="anonymous" issue-term="pathname" repo="owlzou&#x2F;owlzou.github.io" src="https://utteranc.es/client.js" theme="github-light"></script>
                </div>
            
        
    </div>

        </div>
        <!--footer-->
        <div class="footer">
          <!--   -->
          <p>
             &copy;
            <a href="https:&#x2F;&#x2F;owlzou.github.io&#x2F;">Catalyst</a>
            2019-2022 
          </p>
          <p>
            Powered by
            <a href="https://www.getzola.org/">Zola</a>
            | Theme
            <a href="https://github.com/owlzou/zola-theme-cafe">Cafe</a>
          </p>
        </div>

        <!-- 左侧的猫 -->
        <div class="cat">
          <svg
            class="bigcat"
            viewbox="0 0 92.685 127.487"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M50.87 0l6.682 15.234-2.405 1.87c-12.421-3.946-11.914-4.366-17.373-6.413 3.134 22.379 7.721 39.56 17.908 40.892-4.452 9.927-9.597 25.157-12.4 38.035a128.59 128.59 0
                  00-2.016-5.921c-3.92-10.581-10.056-20.87-22.207-26.16a11.983 11.983 0 00-5.147-1.005c-5.124.144-9.936 3.547-12.203 8.532-3.023 6.645-2.272 15.953 4.162 25.388 3.005 4.407 9.615-.1
                  6.61-4.507-5.239-7.682-5.133-13.955-3.489-17.569 1.644-3.614 6.484-4.988 9.279-3.77 9.64 4.197 11.906 10.583 15.493 20.266 2.827 7.631 4.722 17.886 7.65 26.067.967 9.304 5.264
                  15.882 15.069 16.548H74.39c29.742-7.229 15.084-36.557 6.682-78.31C113.317 24.689 61.539 4.242 50.87 0z"
            ></path>
          </svg>
          <!-- 对话气泡 -->
          <div class="toc-bubble">
<ul class="toc">
    
        <li >
            <a id="to-hashmap" href="https://owlzou.github.io/posts/rust-note-7-collections/#hashmap">HashMap</a>
            
        </li>
    
        <li >
            <a id="to-binaryheap" href="https://owlzou.github.io/posts/rust-note-7-collections/#binaryheap">BinaryHeap</a>
            
        </li>
    
        <li >
            <a id="to-hashset" href="https://owlzou.github.io/posts/rust-note-7-collections/#hashset">HashSet</a>
            
        </li>
    
        <li >
            <a id="to-vecdeque" href="https://owlzou.github.io/posts/rust-note-7-collections/#vecdeque">VecDeque</a>
            
        </li>
    
        <li >
            <a id="to-btreemap" href="https://owlzou.github.io/posts/rust-note-7-collections/#btreemap">BTreeMap</a>
            
        </li>
    
</ul>
</div>
        </div>
      </div>
    </div>
    
    <script src="https:&#x2F;&#x2F;owlzou.github.io&#x2F;script.js"></script>
    <script
      onload="icon_loaded()"
      src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"
    ></script>
    
  </body>
</html>
